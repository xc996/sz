# æ·±åœ³æ—…æ¸¸ç½‘ (Shenzhen Tourism Website)

A responsive, bilingual (CN/EN) website showcasing Shenzhen's attractions, culture, food, shopping, and transportation.

ä¸€ä¸ªå±•ç¤ºæ·±åœ³æ™¯ç‚¹ã€æ–‡åŒ–ã€ç¾é£Ÿã€è´­ç‰©å’Œäº¤é€šçš„å“åº”å¼åŒè¯­ï¼ˆä¸­/è‹±ï¼‰ç½‘ç«™ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§ (Key Features)

*   **åŒè¯­æ”¯æŒ (Bilingual Support)**ï¼šå®æ—¶åˆ‡æ¢ä¸­æ–‡/è‹±æ–‡ï¼Œè¦†ç›–å…¨ç«™å†…å®¹ã€‚
*   **å“åº”å¼è®¾è®¡ (Responsive Design)**ï¼šå®Œç¾é€‚é…æ¡Œé¢ç«¯ã€å¹³æ¿å’Œç§»åŠ¨ç«¯è®¾å¤‡ã€‚
*   **æ·±è‰²æ¨¡å¼ (Dark Mode)**ï¼šæ”¯æŒç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹åŠæ‰‹åŠ¨åˆ‡æ¢äº®è‰²/æ·±è‰²ä¸»é¢˜ã€‚
*   **äº¤äº’å¼åœ°å›¾ (Interactive Map)**ï¼šé›†æˆé«˜å¾·åœ°å›¾ (AMap)ï¼Œå±•ç¤ºæ·±åœ³åœ°ç†ä½ç½®ã€‚
*   **æµç•…åŠ¨ç”» (Smooth Animations)**ï¼šé›†æˆ AOS (Animate On Scroll) æ»šåŠ¨åŠ¨ç”»åº“ã€‚
*   **æ¨¡å—åŒ–æ¶æ„ (Modular Architecture)**ï¼šé‡‡ç”¨é…ç½®é©±åŠ¨çš„æ•°æ®æ¸²æŸ“ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚

## ğŸ“ ç›®å½•ç»“æ„ (Directory Structure)

```
sz/
â”œâ”€â”€ assets/                 # é™æ€èµ„æºç›®å½•
â”‚   â”œâ”€â”€ css/                # æ ·å¼æ–‡ä»¶ (common.css, index.css, etc.)
â”‚   â”œâ”€â”€ js/                 # è„šæœ¬æ–‡ä»¶ (index.js, detail.render.js, etc.)
â”‚   â”œâ”€â”€ images/             # å›¾ç‰‡èµ„æº
â”‚   â”œâ”€â”€ data/               # JSON æ•°æ®æ–‡ä»¶ (attractions.json, food.json, etc.)
â”‚   â”œâ”€â”€ vendor/             # ç¬¬ä¸‰æ–¹åº“ (Font Awesome, AOS)
â”‚   â””â”€â”€ webfonts/           # å­—ä½“æ–‡ä»¶
â”œâ”€â”€ pages/                  # å­é¡µé¢ç›®å½•
â”‚   â”œâ”€â”€ attractions/        # æ™¯ç‚¹è¯¦æƒ…é¡µæ¨¡æ¿
â”‚   â”œâ”€â”€ attractions.html    # æ™¯ç‚¹æ€»è§ˆ
â”‚   â”œâ”€â”€ food.html           # ç¾é£Ÿæ¨è
â”‚   â”œâ”€â”€ history.html        # å†å²æ–‡åŒ–
â”‚   â”œâ”€â”€ shopping.html       # è´­ç‰©å¤©å ‚
â”‚   â”œâ”€â”€ traffic.html        # äº¤é€šæŒ‡å—
â”‚   â””â”€â”€ map.html            # ç‹¬ç«‹åœ°å›¾é¡µ
â”œâ”€â”€ index.html              # ç½‘ç«™é¦–é¡µ
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ (Tech Stack)

*   **HTML5**: è¯­ä¹‰åŒ–æ ‡ç­¾ï¼ŒSEO å‹å¥½ã€‚
*   **CSS3**: Flexbox & Grid å¸ƒå±€ï¼ŒCSS å˜é‡ï¼ŒåŠ¨ç”»ã€‚
*   **JavaScript (ES6+)**: æ¨¡å—åŒ–å¼€å‘ï¼ŒDOM æ“ä½œï¼ŒåŠ¨æ€æ¸²æŸ“ã€‚
*   **Font Awesome**: å›¾æ ‡åº“ã€‚
*   **AOS**: æ»šåŠ¨åŠ¨ç”»åº“ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹ (Getting Started)

æœ¬é¡¹ç›®ä¸ºçº¯é™æ€ç½‘ç«™ï¼Œæ— éœ€å¤æ‚çš„æ„å»ºè¿‡ç¨‹ã€‚

### æ–¹å¼ä¸€ï¼šç›´æ¥è¿è¡Œ
ç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `index.html` å³å¯é¢„è§ˆã€‚

### æ–¹å¼äºŒï¼šæœ¬åœ°æœåŠ¡å™¨ (æ¨è)
ä¸ºäº†é¿å…æµè§ˆå™¨çš„è·¨åŸŸé™åˆ¶ (CORS) å¯¼è‡´ JSON æ•°æ®æ— æ³•åŠ è½½ï¼Œå»ºè®®ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨è¿è¡Œã€‚

**Python:**
```bash
python -m http.server 8000
# è®¿é—® http://localhost:8000
```

**Node.js (http-server):**
```bash
npx http-server -p 8000
# è®¿é—® http://localhost:8000
```

## ï¿½ éƒ¨ç½²åˆ° GitHub Pages (Deploy to GitHub Pages)

 - è®¿é—®åœ°å€ï¼š`https://<GitHubç”¨æˆ·å>.github.io/<ä»“åº“å>/`
- åˆ†æ”¯ï¼š`master`ï¼›å·¥ä½œæµï¼š`.github/workflows/pages.yml`
- æ„å»ºå‘½ä»¤ï¼š`npm run build`

### éƒ¨ç½²æ­¥éª¤
- å®‰è£…ä¾èµ–ï¼š`npm ci`
- æœ¬åœ°æ„å»ºï¼š`npm run build`
  - ä¿ç•™ Vite æ„å»ºé¦–é¡µä¸æŒ‡çº¹èµ„æº
  - å¤åˆ¶åŸå§‹ `pages/` ä¸ `assets/` åˆ° `dist/`ï¼ˆç¡®ä¿å­é¡µä¸é™æ€èµ„æºåœ¨ Pages å¯è®¿é—®ï¼‰
- æ¨é€ä»£ç ï¼š`git add README.md scripts/copy-static.mjs package.json && git commit -m "docs(build): æ›´æ–° README ä¸æ„å»ºå¤åˆ¶ pages/assets" && git push`
- ç­‰å¾… GitHub Actions è‡ªåŠ¨éƒ¨ç½²å®Œæˆï¼ˆé€šå¸¸ 1-2 åˆ†é’Ÿï¼‰

### å¸¸è§é—®é¢˜ä¸ä¿®å¤
 - å­é¡µ 404ï¼š`https://<GitHubç”¨æˆ·å>.github.io/<ä»“åº“å>/pages/attractions.html` è¿”å› 404
  - åŸå› ï¼šä»…å‘å¸ƒäº† `dist/index.html`ï¼ŒæœªåŒ…å« `pages/**` å­é¡µä¸ `assets/**` é™æ€ç›®å½•
  - ä¿®å¤ï¼š`scripts/copy-static.mjs` åœ¨æ„å»ºåå¤åˆ¶ `pages/` ä¸ `assets/` è‡³ `dist/`ï¼Œå¹¶å†™å…¥ `dist/.nojekyll`
  - ç°çŠ¶ï¼šæ„å»ºå `dist/` åº”åŒ…å« `pages/*.html`ã€`assets/**` ä»¥åŠé¦–é¡µä¸å“ˆå¸Œèµ„æº

### éªŒè¯æ–¹å¼
- æœ¬åœ°é¢„è§ˆï¼š`npm run preview`ï¼Œè®¿é—® `http://localhost:4173/` ä¸ `http://localhost:4173/pages/attractions.html`
- çº¿ä¸ŠéªŒè¯ï¼šéƒ¨ç½²å®Œæˆåè®¿é—®
  - é¦–é¡µï¼š`/sz/`
  - å­é¡µï¼š`/sz/pages/attractions.html` ç­‰

## ğŸ§± æ„å»ºä¸èµ„æº (Build & Assets)

- `vite.config.js`ï¼š`base: './'`ï¼Œé€‚é…é¡¹ç›®ç«™ç‚¹è·¯å¾„ï¼ˆ`/sz/`ï¼‰
- `package.json`ï¼š`build` è„šæœ¬ä¸º `vite build && node scripts/copy-static.mjs`
- `scripts/copy-static.mjs`ï¼šé€’å½’å¤åˆ¶ `pages/` ä¸ `assets/` åˆ° `dist/`
- `.nojekyll`ï¼šåœ¨ `dist` å†™å…¥ä»¥ç¦ç”¨ Jekyll å¤„ç†

## âœ… è‡ªåŠ¨å·¡æ£€ä¸ç»Ÿä¸€ç®¡ç†ï¼ˆCI & Path Managementï¼‰

- ç»Ÿä¸€èµ„æºè·¯å¾„ï¼šæ‰€æœ‰é¡µé¢è„šæœ¬ç»Ÿä¸€è°ƒç”¨ `window.getAssetsBase()`ï¼ˆä½äº `assets/js/utils.js`ï¼‰ç”Ÿæˆèµ„æºåŸºè·¯å¾„ï¼Œé¿å…å„å¤„é‡å¤å®ç°ä¸è·¯å¾„ä¸ä¸€è‡´ã€‚
- æ„å»ºåå¤åˆ¶ï¼šå§‹ç»ˆé€šè¿‡ `scripts/copy-static.mjs` å°† `pages/` å’Œ `assets/` ä¸€å¹¶å¤åˆ¶åˆ° `dist/`ï¼Œç¡®ä¿å­é¡µä¸é™æ€èµ„æºå‘å¸ƒå®Œæ•´ã€‚
- å‘å¸ƒå‰è‡ªåŠ¨å·¡æ£€ï¼ˆCIï¼‰ï¼šå·¥ä½œæµ `.github/workflows/pages.yml` åœ¨æ„å»ºåæ‰§è¡Œ `npm run audit`ï¼Œå¯¹ HTML/JS ä¸­çš„ `href/src` å’Œ JSON å¼•ç”¨è¿›è¡Œå¹¶å‘æ£€æŸ¥ï¼›CI ä¼šè‡ªåŠ¨æ ¹æ®ä»“åº“ä¸Šä¸‹æ–‡è®¾ç½® `ORIGIN=https://<GitHubç”¨æˆ·å>.github.io` ä¸ `BASE=/&lt;ä»“åº“å&gt;`ï¼Œå‘ç°é 200 èµ„æºå°†é˜»æ–­éƒ¨ç½²ï¼Œé¿å… 404 å†æ¬¡ä¸Šçº¿ã€‚
  - æ‰‹åŠ¨è¿è¡Œï¼š`npm run audit`
  - å‚æ•°è¯´æ˜ï¼š`--origin https://<GitHubç”¨æˆ·å>.github.io --base /<ä»“åº“å> --fail-on-404`
  - æ£€æŸ¥èŒƒå›´ï¼š`index.html`ã€`pages/**`ã€`assets/js/**` ä¸­çš„ `assets/**` èµ„æºé“¾æ¥ï¼ˆå« `.css/.js/.png/.jpg/.jpeg/.svg/.woff2/.ttf/.json`ï¼‰

## ï¿½ï¿½ æœ€è¿‘æ›´æ–° (Recent Updates) - 2025-12-21

### 1. é¡¹ç›®ç»“æ„é‡æ„ (Refactoring)
*   **ç›®å½•æ•´ç†**ï¼šå°†é™¤é¦–é¡µå¤–çš„æ‰€æœ‰ HTML æ–‡ä»¶ç§»è‡³ `pages/` ç›®å½•ï¼Œä¿æŒæ ¹ç›®å½•æ•´æ´ã€‚
*   **è·¯å¾„ä¿®æ­£**ï¼šæ›´æ–°äº†æ‰€æœ‰é¡µé¢ä¸­çš„èµ„æºå¼•ç”¨è·¯å¾„ï¼ˆ`../assets/...`ï¼‰ï¼Œç¡®ä¿é“¾æ¥æœ‰æ•ˆã€‚

### 2. CSS æ¨¡å—åŒ–ä¸å»é‡ (CSS Modularization)
*   **æå–å…¬å…±æ ·å¼**ï¼šåˆ›å»º `assets/css/common.css`ï¼Œé›†ä¸­ç®¡ç†å…¨å±€å˜é‡ã€é‡ç½®æ ·å¼ã€å¯¼èˆªæ ã€é¡µè„šã€æŒ‰é’®åŠåŠ¨ç”»ã€‚
*   **æ¸…ç†å†—ä½™ä»£ç **ï¼šå¤§å¹…ç²¾ç®€å„é¡µé¢ä¸“å± CSS æ–‡ä»¶ï¼Œå»é™¤é‡å¤å®šä¹‰ï¼Œå‡å°ä½“ç§¯ã€‚
*   **ä¿®å¤æ ·å¼ä¸¢å¤±**ï¼šä¿®å¤äº†é‡æ„è¿‡ç¨‹ä¸­è½®æ’­å›¾ (`carousel`) å’Œå¡ç‰‡ç½‘æ ¼ (`grid`) æ ·å¼ä¸¢å¤±çš„é—®é¢˜ã€‚

### 3. èµ„æºè·¯å¾„ä¸ç¼“å­˜ä¼˜åŒ– (Assets & Caching)
*   **åŠ¨æ€è·¯å¾„é€‚é…**ï¼šå¼•å…¥ `getAssetsBase()` å‡½æ•°ï¼Œè‡ªåŠ¨è¯†åˆ«è¿è¡Œç¯å¢ƒï¼ˆæœ¬åœ°æˆ– GitHub Pagesï¼‰ã€‚
    *   **æœ¬åœ°ç¯å¢ƒ**ï¼šä½¿ç”¨ç›¸å¯¹è·¯å¾„æˆ–æ ‡å‡†æ ¹è·¯å¾„ã€‚
    *   **GitHub Pages**ï¼šè‡ªåŠ¨æ·»åŠ ä»“åº“åå‰ç¼€ï¼ˆå¦‚ `/sz/assets/...`ï¼‰ï¼Œå®Œç¾è§£å†³éæ ¹ç›®å½•éƒ¨ç½²æ—¶çš„èµ„æº 404 é—®é¢˜ã€‚
*   **ç¼“å­˜æ¸…é™¤ (Cache Busting)**ï¼šå…¨ç«™èµ„æºå¼•ç”¨æ·»åŠ ç‰ˆæœ¬å·å‚æ•° (`?v=20251221...`)ï¼Œç¡®ä¿ç”¨æˆ·å§‹ç»ˆåŠ è½½æœ€æ–°ä»£ç ã€‚

### 4. åŠŸèƒ½ä¿®å¤ (Bug Fixes)
*   **æ–‡ä»¶ç¼–ç ä¿®å¤**ï¼šå½»åº•æ¸…é™¤ HTML æ–‡ä»¶å¤´éƒ¨çš„ BOM å­—ç¬¦ï¼Œè§£å†³äº†é¡µé¢é¡¶éƒ¨å‡ºç°ä¸å¯è§ç©ºç™½è¡Œçš„é—®é¢˜ã€‚
*   **UI ç»†èŠ‚ä¼˜åŒ–**ï¼š
    *   ä¿®å¤åœ°å›¾é¡µ (`map.html`) é¡¶éƒ¨èƒŒæ™¯å›¾æ˜¾ç¤ºå¼‚å¸¸ï¼Œå¼ºåˆ¶å…¨å±å¡«å……ã€‚
    *   ä¼˜åŒ–å…¨ç«™åº•éƒ¨çš„æ»šåŠ¨æç¤ºç»„ä»¶ï¼Œè°ƒæ•´å¸ƒå±€å¹¶å¢åŠ ç®­å¤´åŠ¨ç”»ï¼Œæ¶ˆé™¤è§†è§‰é‡å ã€‚
*   **åœ°å›¾é¡µä¿®å¤**ï¼šä¿®å¤äº†åœ°å›¾å®¹å™¨é«˜åº¦å¡Œé™·å¯¼è‡´ `iframe` æ— æ³•æ˜¾ç¤ºçš„é—®é¢˜ã€‚
*   **å›¾ç‰‡æ˜¾ç¤ºä¿®å¤**ï¼šè§£å†³äº†å†å²æ–‡åŒ–é¡µ (`history.html`) å›¾ç‰‡å› è·¯å¾„é”™è¯¯æ— æ³•æ˜¾ç¤ºçš„é—®é¢˜ã€‚
*   **å¸ƒå±€ä¿®å¤**ï¼šè§£å†³äº†è´­ç‰©é¡µ (`shopping.html`) å’Œæ™¯ç‚¹é¡µ (`attractions.html`) å› æ ·å¼ç¼ºå¤±å¯¼è‡´çš„æ’ç‰ˆé”™ä¹±ã€‚

## â˜ï¸ éƒ¨ç½²åˆ° Cloudflareï¼ˆPages ä¸ Workersï¼‰

æœ¬é¡¹ç›®å·²å†…ç½® Cloudflare é…ç½®ä¸è„šæœ¬ï¼Œæ”¯æŒä¸¤ç§éƒ¨ç½²æ–¹å¼ï¼šCloudflare Pagesï¼ˆé™æ€ç«™ç‚¹æ‰˜ç®¡ï¼‰ä¸ Cloudflare Workersï¼ˆé€šè¿‡ KV/Assets æä¾›é™æ€èµ„æºå¹¶æ”¯æŒ SPA å…œåº•ï¼‰ã€‚

### Cloudflare Pages è¡¨å•å¡«å†™
- ç”Ÿäº§åˆ†æ”¯ï¼š`master`
- æ¡†æ¶é¢„è®¾ï¼š`æ— `
- æ„å»ºå‘½ä»¤ï¼š`npm run build`
- æ„å»ºè¾“å‡ºç›®å½•ï¼š`dist`
- æ ¹ç›®å½•ï¼ˆé«˜çº§ï¼‰ï¼š`/`ï¼ˆè‹¥ä»“åº“å³ä¸ºé¡¹ç›®æ ¹ï¼Œä¿æŒ `/` æˆ–ç•™ç©ºï¼‰

è¯´æ˜ï¼šæ„å»ºè„šæœ¬ä¼šä½¿ç”¨ Vite ç”Ÿæˆé¦–é¡µä¸æŒ‡çº¹èµ„æºï¼Œå¹¶é€šè¿‡ [scripts/copy-static.mjs](scripts/copy-static.mjs) å¤åˆ¶ `pages/` ä¸ `assets/` åˆ° `dist/`ï¼Œä¿è¯å­é¡µå’Œé™æ€èµ„æºåœ¨ Pages ç¯å¢ƒå¯ç›´æ¥è®¿é—®ã€‚

å¯é€‰ï¼ˆCLIï¼‰ï¼š

```bash
# ç™»å½• Cloudflare è´¦å·
npx wrangler login

# æœ¬åœ°å¼€å‘é¢„è§ˆï¼ˆPagesï¼‰
npm run pages:dev

# å‘å¸ƒåˆ° Pagesï¼ˆå°† dist ç›®å½•éƒ¨ç½²ï¼‰
npm run pages:publish
```

### Cloudflare Workers è¡¨å•å¡«å†™
- é¡¹ç›®åç§°ï¼š`sz-tourism-site`ï¼ˆæˆ–ä½ åå¥½çš„åç§°ï¼Œå»ºè®®ä¸ [wrangler.toml](wrangler.toml) çš„ `name` ä¿æŒä¸€è‡´ï¼‰
- æ„å»ºå‘½ä»¤ï¼š`npm run build`
- éƒ¨ç½²å‘½ä»¤ï¼š`npm run cf:publish`ï¼ˆæˆ– `npx wrangler deploy`ï¼‰
- éç”Ÿäº§åˆ†æ”¯æ„å»ºï¼šå‹¾é€‰ï¼ˆå¯é€‰ï¼‰
- éç”Ÿäº§åˆ†æ”¯éƒ¨ç½²å‘½ä»¤ï¼š`npm run cf:publish`ï¼ˆå¯é€‰ï¼‰

è¯´æ˜ï¼š
- å·²æä¾› Worker å…¥å£ [worker/index.js](worker/index.js)ï¼Œé€šè¿‡ `env.ASSETS` ç»‘å®šé™æ€èµ„æºç›®å½•ï¼Œå¹¶åœ¨ GET è¯·æ±‚ 404 æ—¶å›é€€åˆ° `/index.html`ï¼Œé€‚é…å‰ç«¯è·¯ç”±ã€‚
- [wrangler.toml](wrangler.toml) ä¸­ `assets.directory = "./dist"`ï¼Œç¡®ä¿ Workers ä½¿ç”¨æ„å»ºäº§ç‰©ï¼›`main = "worker/index.js"` æŒ‡å®šå…¥å£ã€‚

å¯é€‰ï¼ˆCLIï¼‰ï¼š

```bash
# ç™»å½• Cloudflare è´¦å·
npx wrangler login

# æœ¬åœ°å¼€å‘ï¼ˆWorkersï¼‰
npm run cf:dev

# å‘å¸ƒåˆ° Workersï¼ˆè¯»å– wrangler.toml é…ç½®ï¼‰
npm run cf:publish
```

### éªŒè¯ä¸å¸¸è§é—®é¢˜
- æ„å»ºåè¯·ç¡®è®¤ `dist/` ä¸­åŒ…å«ï¼š`index.html`ã€`pages/**`ã€`assets/**`ã€‚
- è‹¥å‰ç«¯è·¯ç”±åœ¨ Workers ä¸‹å‡ºç° 404ï¼Œç¡®è®¤å…¥å£é€»è¾‘å·²å›é€€åˆ° `/index.html`ï¼ˆè§ [worker/index.js](worker/index.js)ï¼‰ã€‚
- Pages ä¸ Workers å¯å¹¶å­˜ï¼šPages é¢å‘æ‰˜ç®¡é™æ€ç«™ç‚¹ï¼ŒWorkers é¢å‘è¾¹ç¼˜é€»è¾‘ä¸ SPA å…œåº•ï¼›ä¸¤è€…äº’ä¸å†²çªã€‚

## ğŸ“„ License

MIT License
