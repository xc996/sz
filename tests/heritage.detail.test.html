<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Heritage Detail Render Test</title>
  <link rel="stylesheet" href="../assets/css/history.css">
  <link rel="stylesheet" href="../assets/css/detail.css">
  <link rel="stylesheet" href="../assets/vendor/all.min.css">
  <link href="../assets/vendor/aos.css" rel="stylesheet">
</head>
<body data-theme="light" data-lang="zh">
  <nav id="navbar">
    <div class="nav-container">
      <div class="logo"><img src="../assets/images/深圳logo.png" alt="深圳" class="logo-icon" style="height: 30px; width: auto;"><span class="logo-text" data-i18n="nav.logo">深圳</span></div>
      <ul class="nav-menu" id="navMenu"></ul>
      <div class="nav-actions">
        <button id="langSwitch" class="icon-btn"><i class="fas fa-globe"></i><span>EN</span></button>
        <button id="themeToggle" class="icon-btn"><i class="fas fa-moon"></i></button>
        <button id="menuToggle" class="menu-toggle"><span></span><span></span><span></span></button>
      </div>
    </div>
  </nav>

  <section class="heritage-detail-section"><div class="container"><div id="detailRoot"></div></div></section>
  <button id="backToTop" class="back-to-top"><i class="fas fa-arrow-up"></i></button>

  <script src="../assets/vendor/aos.js"></script>
  <script src="../assets/js/history.js"></script>
  <script src="../assets/js/detail.js"></script>
  <script>
  // 设置查询参数以指定 slug 为 dapeng
  history.replaceState(null, '', '?slug=dapeng&type=heritage');
  </script>
  <script src="../assets/js/heritage.detail.render.js"></script>
  <script>
  /**
   * 功能：验证大鹏所城扩展内容是否渲染
   */
  function assertDapengContent() {
    setTimeout(() => {
      const root = document.getElementById('detailRoot');
      const extendedContent = root.querySelector('.detail-content:nth-of-type(2)');
      const historySection = root.querySelector('h2:contains("历史沿革"), h2:contains("History")');
      
      console.log('Root content:', root.innerHTML);
      console.log('Extended content exists:', !!extendedContent);
      console.log('History section exists:', !!historySection);
      
      if (extendedContent && historySection) {
        const ok = document.createElement('div');
        ok.id = 'data-test-passed';
        ok.textContent = '大鹏所城扩展内容渲染通过';
        ok.style.cssText = 'position:fixed;bottom:10px;right:10px;background:#0a0;color:#fff;padding:6px 10px';
        document.body.appendChild(ok);
      } else {
        const error = document.createElement('div');
        error.id = 'data-test-failed';
        error.textContent = '大鹏所城扩展内容渲染失败';
        error.style.cssText = 'position:fixed;bottom:10px;right:10px;background:#a00;color:#fff;padding:6px 10px';
        document.body.appendChild(error);
      }
    }, 1000);
  }
  document.addEventListener('DOMContentLoaded', assertDapengContent);
  </script>
</body>
</html>